{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "get_order_flow",
  "description": "Calculate order flow metrics (bid/ask flow rates, net flow, direction) over a configurable time window. Returns OrderFlowSnapshot showing buying/selling pressure dynamics. Spec: FR-001, FR-006, FR-007.",
  "type": "object",
  "properties": {
    "symbol": {
      "type": "string",
      "description": "Trading pair symbol (e.g., 'BTCUSDT', 'ETHUSDT')",
      "pattern": "^[A-Z]{4,12}$",
      "examples": ["BTCUSDT", "ETHUSDT"]
    },
    "time_window_secs": {
      "type": "integer",
      "description": "Time window duration in seconds. Must be one of: 10, 30, 60, 300",
      "enum": [10, 30, 60, 300],
      "default": 60
    }
  },
  "required": ["symbol"],
  "additionalProperties": false,
  "response": {
    "type": "object",
    "properties": {
      "symbol": { "type": "string" },
      "time_window_start": { "type": "string", "format": "date-time" },
      "time_window_end": { "type": "string", "format": "date-time" },
      "window_duration_secs": { "type": "integer" },
      "bid_flow_rate": { "type": "number", "minimum": 0, "description": "Bid orders per second" },
      "ask_flow_rate": { "type": "number", "minimum": 0, "description": "Ask orders per second" },
      "net_flow": { "type": "number", "description": "Bid flow - ask flow (positive = buying pressure)" },
      "flow_direction": {
        "type": "string",
        "enum": ["STRONG_BUY", "MODERATE_BUY", "NEUTRAL", "MODERATE_SELL", "STRONG_SELL"],
        "description": "Categorical pressure indicator (spec FR-006)"
      },
      "cumulative_delta": { "type": "number", "description": "Running sum of (buy volume - sell volume)" }
    },
    "required": ["symbol", "time_window_start", "time_window_end", "bid_flow_rate", "ask_flow_rate", "net_flow", "flow_direction", "cumulative_delta"]
  }
}
